from flask import Flask, request, jsonify, render_template
from flask_cors import CORS
import openai

app = Flask(_name_, static_folder="static", template_folder="templates")
CORS(app)

# Set your OpenAI API key
openai.api_key = "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"  # Replace with your actual API key

@app.route("/")
def home():
    return render_template("index.html")  # Serve the frontend

@app.route("/ask", methods=["POST"])
def ask():
    data = request.get_json()
    user_query = data.get("question")

    if not user_query:
        return jsonify({"response": "Please enter a valid question."})

    response = openai.ChatCompletion.create(
        model="gpt-3.5-turbo",  # Use GPT-4 if available
        messages=[
            {"role": "system", "content": "You are a legal AI assistant."},
            {"role": "user", "content": user_query}
        ]
    )

    answer = response["choices"][0]["message"]["content"]
    return jsonify({"response": answer})

if _name_ == "_main_":
    app.run(debug=True)
